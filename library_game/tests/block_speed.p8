pico-8 cartridge // http://www.pico-8.com
version 38
__lua__
--loop
function _init()
 box1={
  sp=1,
  x=24,
  y=56,
  init_y=56,
  max_y=53,
  start=true,
  hit=false,
  apex=false,
  speed=.5,
  speed_low=0.04,
  speed_up=0,
  speed_down=0,
  slow_down=1.1,
  fast_up=1.2,
  anim=0
 }
 box2={
  sp=17,
  x=56,
  y=56,
  init_y=56,
  max_y=53,
  start=true,
  hit=false,
  apex=false,
  speed=.5,
  speed_low=0.04,
  speed_up=0,
  speed_down=0,
  slow_down=1.1,
  fast_up=1.2,
  anim=0
 }
 box3={
  sp=33,
  x=88,
  y=56,
  init_y=56,
  max_y=53,
  start=true,
  hit=false,
  apex=false,
  speed_up=0,
  speed_down=0,
  anim=0
 }
 box1.speed_low=0.04
 box1.speed=.5
 box1.slow_down=1.1
 box1.fast_down=1.2

 box2.speed_low=0.03
 box2.speed=.4
 box2.slow_down=1.12
 box2.fast_down=1.25

 box3.speed_low=0.02
 box3.speed=.55
 box3.slow_down=1.15
 box3.fast_down=1.25
end

function _draw()
 cls(0)

 for x=0,15 do
  for y=0,15 do
   --vert
   line(x*8,0,x*8,15*8,6)
   --hor
   line(0,y*8,15*8,y*8,6)
  end
 end
 
 spr(box1.sp,box1.x,box1.y)
 spr(box2.sp,box2.x,box2.y)
 spr(box3.sp,box3.x,box3.y)
 
 rectfill(0,0,25,5,0)
 print(box1.speed_down,14)

 rectfill(box1.x,box1.init_y+9,box1.x+10,box1.init_y+15,0)
 print('y='..flr(box1.y),box1.x-3,box1.init_y+10,10)

 rectfill(box2.x,box2.init_y+9,box2.x+10,box2.init_y+15,0)
 print('y='..flr(box2.y),box2.x-3,box2.init_y+10,12)

 rectfill(box3.x,box3.init_y+9,box3.x+10,box3.init_y+15,0)
 print('y='..flr(box3.y),box3.x-3,box3.init_y+10,11)
end

function _update60()
 _box1()
 _box2()
 _box3()
end
-->8
--brick1
function _box1()
 box_move(box1,0,1,2)
end
-->8
--brick2
function _box2()
 box_move(box2,3,17,18)
end
-->8
--brick3
function _box3()
 box_move(box3,1,33,34)
end

function box_move(box,btnn,sp1,sp2)
 if (btn(btnn) or btn(2))
 and box.start then
  box.sp=sp2

  box.hit=true
  box.start=false
 end
 
 if box.hit then
  if time()-box.anim>.1 then
   if box.y>=box.max_y then
    if box.speed_up>box.speed_low then
     box.speed_up/=box.slow_down
    end
    box.y-=box.speed_up
   else
    box.apex=true
    box.hit=false
   end
  end

 elseif box.apex then
  if time()-box.anim>.1 then
   if box.y<box.init_y then
    if box.speed_down>=box.speed_low then
     box.speed_down*=box.fast_down
    end
    box.y+=box.speed_down
   else
    box.start=true
    box.apex=false
   end
  end
 end

 if box.start then
  box.sp=sp1
  box.speed_up=box.speed
  box.speed_down=box.speed_low
 end
end
__gfx__
0000000099999999aaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000099999999aaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070099999999aaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700099999999aaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700099999999aaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070099999999aaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000099999999aaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000099999999aaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ddddddddcccccccc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ddddddddcccccccc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ddddddddcccccccc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ddddddddcccccccc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ddddddddcccccccc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ddddddddcccccccc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ddddddddcccccccc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ddddddddcccccccc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000033333333bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000033333333bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000033333333bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000033333333bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000033333333bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000033333333bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000033333333bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000033333333bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
